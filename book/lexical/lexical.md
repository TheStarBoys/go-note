# 词法

## 语言符号（词法元素）

- 标识符（identifier）
- 关键字（keyword）
- 操作符（operator）
- 隔离符（delimiter）
- 字面量（literal）

## 标识符

**命名规范：**

由若干字母、下划线 `“_”` 和数字组成的字符序列。第一个字符必须为字母——符合Unicode编码规范的。

**作用：**

将一个非空的标识符与一个 常量、类型、变量、函数或代码包绑定在一起。

**作用域：**

与其所属的代码块的范围相同。

**可导出：**

一个可导出的标识符必须满足两个前提条件：

1. 标识符名称中的第一个字符必须**大写**。
   - 意味着该标识符可以被任何代码包中的任何代码通过限定标识符访问到。
   - 如果是小写，意味着**“包级私有的”**，只有与该标识符同在一个代码包的代码才能够访问到它。
2. 标识符必须是被声明在一个代码包中的变量或者类型名称或者属于某个结构体类型的字段名称或方法名称。

**预定义标识符：**

- 所有基本数据类型的名称
- 接口类型 `error`
- 常量 `true`、`false` 和 `iota`
- 所有内建函数的名称
  - append
  - cap
  - close
  - complex
  - copy
  - delete
  - imag
  - len
  - make
  - new
  - panic
  - print
  - println
  - real
  - recover

**空标识符：`_`**

空标识符由下划线 `“_”` 表示。一般用在不需要引入一个新绑定的声明中。

例如：

一个变量 `x` 被声明但未被使用，可以通过 `_` 来解决这个问题：

```go
_ = x
```

在导入语句（或称导入声明）中，我们只想执行某个代码包中的初始化函数，而不需要使用这个代码包中的任何程序实体时：

```go
import (
	_ "runtime/cgo"
)
```



## 关键字

关键字：被编程语言保留而不让编程人员作为标识符使用的字符序列。

Go语言中的关键字：

- 程序声明
  - import
  - package
- 程序实体声明和定义
  - chan
  - const
  - func
  - interface
  - map
  - struct
  - type
  - var
- 程序流程控制
  - go
  - select
  - break
  - case
  - continue
  - default
  - defer
  - else
  - fallthrough
  - for
  - goto
  - if
  - range
  - return
  - switch

## 字面量

**1. 用于表示基本数据类型值的各种字面量。**

**2. 用于构造各种自定义的复合数据类型的类型字面量。**

例如，下面的字面量用于表示一个名称为 `Person` 的自定义结构体类型：

```go
type Person struct {
	Name    string
    Age     uint8
    Address string
}
```

**3. 用于表示复合数据类型的值的符合字面量，即构造类型Struct、Array、Slice和Map的值**

例如，下面的字面量用于表示上面那个名称为 `Person` 的结构体类型的值：

```go
Person{"Robert Hao", 32, "BeiJing, China"}
```

或者

```go
Person{Name: "Robert Hao", Age: 32, Address: "BeiJing, China"}
```

或者

```go
Person{
    Name: "Robert Hao",
    Age: 32,
    Address: "BeiJing, China",
}
```



## 操作符

操作符：用于执行特定算数或逻辑运算操作的符号。操作符总是会与其操作对象结合起来以表达既定的语义。这些操作对象统称为操作数。

### 算术操作符

**标准操作符**，可以用于操作整数、浮点数、复数类型的操作数。它们是 `+ - * /`

| 符号 | 说明       | 示例                       |
| ---- | ---------- | -------------------------- |
| +    | 求和操作   | `+1 // 1 ` 、`1 + 2 // 3`  |
| -    | 求差操作   | `-1 // -1` 、`1 - 3 // -2` |
| *    | 求乘积操作 | `2 * 5 // 10`              |
| /    | 求商操作   | `10 / 5 // 2`              |

其中 `+` 可以作为字符串的连接符使用：

```go
"Hello" + "World" + "!"
```

**标准操作符之外**，其余的Go语言算数操作符**只能**用于**操作整数**类型，包括 `%`、 `&`、 `|`、 `^`、 `&^`、 `<<`、 `>>`

| 符号 | 说明                       | 示例                            |
| ---- | -------------------------- | ------------------------------- |
| %    | 求余数操作                 | `13 % 5 // 3`                   |
| &    | 按位与操作                 | `11 & 5 // 1`                   |
| \|   | 按位或操作                 | `5 | 11 // 15`                  |
| ^    | 按位异或操作，或者按位取反 | `5 ^ 11 // 14`、 `^5 // -6`     |
| &^   | 按位清除操作               | `5 &^ 11 // 4`、`11 &^ 5 // 10` |
| <<   | 按位左移操作               | `4 << 2 // 16`                  |
| \>>  | 按位右移操作               | `4 >> 2 // 1`                   |

### 比较操作符

比较操作符使用的**前提**是，参与比较的操作数是**可比较的**。

| 符号 | 说明               | 示例                     |
| ---- | ------------------ | ------------------------ |
| ==   | 相等判断操作       | `"abc" == "abc" // true` |
| !=   | 不等判断操作       | `"abc" != "Abc" // true` |
| <    | 小于判断操作       | `1 < 2 // true`          |
| <=   | 小于或等于判断操作 | `2 <= 2 // true`         |
| >    | 大于判断操作       | `2 > 1 // true`          |
| \>=  | 大于或等于判断操作 | `2 >= 2 // true`         |



### 逻辑操作符

| 符号 | 说明       | 示例                             |
| ---- | ---------- | -------------------------------- |
| \|\| | 逻辑或操作 | `true || false // true`          |
| &&   | 逻辑与操作 | `true || true // true`           |
| !    | 逻辑非操作 | `!b // 若b为true，则结果为false` |



### 地址操作符

| 符号 | 说明     | 示例                        |
| ---- | -------- | --------------------------- |
| &    | 取址操作 | `&v // 获取标识符v的地址`   |
| *    | 取值操作 | `*p // 获取指针p所指向的值` |

### 接收操作符

| 符号 | 说明     | 示例                            |
| ---- | -------- | ------------------------------- |
| <-   | 接收操作 | `<- ch // 从通道ch中接收一个值` |



### 操作符优先级

| 优先级 | 操作符                         |
| ------ | ------------------------------ |
| 5      | `*` `/` `%` `<<` `>>` `&` `&^` |
| 4      | `+` `-` `|` `^`                |
| 3      | `==` `!=` `<` `<=` `>` `>=`    |
| 2      | `&&`                           |
| 1      | `||`                           |

优先级数字越大，优先级越高。如果在一个表达式中，出现了处于相同优先级的多个操作符，且这些操作符之间仅存在操作数，那么就会按照从左到右的顺序进行操作。

比如：`a << 4 * b & c` 等同于 `((a << 4) * b) & c`。

可以使用圆括号改变操作顺序：`a << (4 * b) & c`，表达式 `4 * b`会先运算。